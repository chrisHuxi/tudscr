\begingroup
  \catcode`\@11\relax
  \ifx\TUD@Version\@undefined
    \newcommand*\TUD@Version@Check[1]{%
      \gdef\TUD@Version{#1}%
      \gdef\TUDScriptVersion{#1}%
      \def\@tempb##1 v##2 ##3\relax##4\relax{\gdef\TUDScriptVersionNumber{##2}}%
      \edef\@tempa{\TUD@Version}%
      \expandafter\@tempb\@tempa\relax? ? \relax\relax%
      \gdef\TUD@Version@KOMA{3.25}%
    }
  \else
    \newcommand*\TUD@Version@Check[1]{%
      \def\@tempa{#1}%
      \ifx\TUD@Version\@tempa\else%
        \@latex@warning@no@line{%
          \noexpand\TUD@Version\space is `\TUD@Version',\MessageBreak%
          but `#1' was expected!\MessageBreak%
          You should not use classes, packages or files from\MessageBreak%
          different TUD-Script-Bundle versions%
        }%
      \fi%
    }
  \fi
  \TUD@Version@Check{2018/07/03 v2.06 TUD-Script}
\endgroup
\NeedsTeXFormat{LaTeX2e}
\providecommand*\tudscrmail{hanisch.latex@outlook.com}
\ifx\TUD@Class@Name\@undefined
  \RequirePackage{tudscrfonts}[\TUD@Version]
\fi
\newif\if@tud@cdfont@usedin
\TUD@key{cdfont}[true]{%
  \TUD@set@numkey{cdfont}{@tempa}{%
    {din}{0},{dinbold}{0},{DIN}{0},{DINBold}{0},%
    {nodin}{1},{nodinbold}{1},{noDIN}{1},{noDINBold}{1}%
  }{#1}%
  \ifx\FamilyKeyState\FamilyKeyStateProcessed%
    \tud@cdfont@activate%
    \ifcase\@tempa\relax% din
      \@tud@cdfont@usedintrue%
    \or% nodin
      \@tud@cdfont@usedinfalse%
    \fi%
  \fi%
}
\TUDExecuteOptions{cdfont=din}
\TUDProcessOptions\relax
\newcommand*\tud@cdfont@uv{lun}
\newif\if@tud@cdfont@uv
\newif\if@tud@cdmath@uv
\newcommand*\tud@cdfont@db{0m6}
\newif\if@tud@cdfont@db
\newif\if@tud@cdmath@db
\renewcommand*\tud@cdfont@check{%
  \edef\@tempa##1##2{\lowercase{\noexpand\IfFileExists{##1##2.fd}}}%
  \if@tud@x@fontspec@enabled%
    \def\@tempb##1##2{%
      \IfFontExistsTF{##1}{}{%
        ##2%
        \if@tud@cdfont@active%
          \tud@cdfont@missing{##1}%
        \fi%
      }%
    }%
    \@tud@cdfont@uvtrue%
    \@tempb{Univers Light}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers Bold}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers Black}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers LightOblique}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers Oblique}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers BoldOblique}{\@tud@cdfont@uvfalse}%
    \@tempb{Univers BlackOblique}{\@tud@cdfont@uvfalse}%
    \@tud@cdfont@dbtrue%
    \@tempb{DIN-Bold}{\@tud@cdfont@dbfalse}%
  \else%
    \def\@tempb##1{%
      \if@tud@cdfont@active%
        \tud@cdfont@missing{##1}%
      \fi%
    }%
    \expandafter\@tempa\expandafter{\encodingdefault}%
      {\tud@cdfont@uv}{\@tud@cdfont@uvtrue}{\@tempb{Univers}}%
    \expandafter\@tempa\expandafter{\encodingdefault}%
      {\tud@cdfont@db}{\@tud@cdfont@dbtrue}{\@tempb{DIN-Bold}}%
  \fi%
  \ifboolexpr{bool {@tud@cdfont@uv} and bool {@tud@cdfont@db}}{}{%
    \bool@std@lock{@tud@cdmath@active}{false}%
  }%
  \def\@tempb##1{%
    \if@tud@cdmath@active%
      \tud@cdmath@missing{##1}%
    \fi%
  }%
  \@tempa{OT1}{\tud@cdfont@uv}{\@tud@cdmath@uvtrue}{\@tempb{Univers}}%
  \@tempa{OT1}{\tud@cdfont@db}{\@tud@cdmath@dbtrue}{\@tempb{DIN-Bold}}%
  \ifboolexpr{bool {@tud@cdmath@uv} and bool {@tud@cdmath@db}}{}{%
    \bool@set@lock{@tud@cdmath@active}{false}%
  }%
  \undef\tud@cdfont@check%
}
\renewcommand*\tud@cdfont@missing[1]{%
  \begingroup%
    \def\@tempa{%
      `#1' font not found for `\encodingdefault' encoding.\MessageBreak%
    }%
    \if@tud@x@fontspec@enabled%
      \appto\@tempa{%
        It seems, you haven't installed the required\MessageBreak%
        OTF-font on your system%
      }%
    \else%
      \ifstr{TU}{\encodingdefault}{%
        \appto\@tempa{%
          You should load package `fontspec'\MessageBreak%
          or %
        }%
      }{%
         \appto\@tempa{Please }%
      }%
      \@tempswafalse%
      \ifstr{OT1}{\encodingdefault}{\@tempswatrue}{}%
      \ifstr{T1}{\encodingdefault}{\@tempswatrue}{}%
      \if@tempswa%
        \appto\@tempa{%
          use one of the installation scripts listed\MessageBreak%
          in the TUD-Script manual%
        }%
      \else%
        \appto\@tempa{%
          choose a possible encoding with\MessageBreak%
          package `fontenc' (`OT1' or `T1')%
        }%
      \fi%
    \fi%
    \appto\@tempa{.\MessageBreak A fallback layout is used}%
    \PackageWarning{tudscroldfonts}{\@tempa}%
  \endgroup%
}
\newcommand*\tud@cdmath@missing[1]{%
  \PackageWarning{tudscroldfonts}{%
    `#1' fonts for math typesetting not found.\MessageBreak%
    Please use one of the installation scripts listed\MessageBreak%
    in the TUD-Script manual%
  }%
}
\renewcommand*\tud@cdfont@set{%
  \if@atdocument%
    \if@tud@cdfont@uv\else%
      \tud@cdfont@missing{Univers}%
    \fi%
    \if@tud@cdfont@db\else%
      \tud@cdfont@missing{DIN-Bold}%
    \fi%
    \ifboolexpr{bool {@tud@cdfont@uv} and bool {@tud@cdfont@db}}{}{%
      \bool@std@lock{@tud@cdmath@active}{false}%
    }%
  \fi%
  \if@tud@cdfont@uv%
    \if@tud@x@fontspec@enabled%
      \setsansfont{\tud@cdfont@uv}%
      \if@tud@cdfont@tt%
        \setmonofont{\tud@cdfont@uv t}%
      \fi%
    \else%
      \renewcommand*\sfdefault{\tud@cdfont@uv}%
      \if@tud@cdfont@tt%
        \renewcommand*\ttdefault{\tud@cdfont@uv t}%
      \fi%
    \fi%
    \tud@cdfont@@set%
    \let\mddefault\tud@cdfont@md%
    \let\bfdefault\tud@cdfont@bf%
  \fi%
}
\renewcommand*\tud@cdfont@@set{%
  \if@tud@cdfont@heavy%
    \renewcommand*\tud@cdfont@md{m}%
    \if@tud@cdfont@ultrabold%
      \renewcommand*\tud@cdfont@bf{eb}%
      \renewcommand*\tud@cdfont@ebf{eb}%
    \else%
      \renewcommand*\tud@cdfont@bf{b}%
      \renewcommand*\tud@cdfont@ebf{eb}%
    \fi%
  \else%
    \renewcommand*\tud@cdfont@md{l}%
    \if@tud@cdfont@ultrabold%
      \renewcommand*\tud@cdfont@bf{b}%
      \renewcommand*\tud@cdfont@ebf{eb}%
    \else%
      \renewcommand*\tud@cdfont@bf{m}%
      \renewcommand*\tud@cdfont@ebf{b}%
    \fi%
  \fi%
}

\renewcommand*\tud@cdfont@init{%
  \if@tud@cdfont@uv%
    \if@tud@x@fontspec@enabled%
      \tud@x@fontspec@init{\tud@cdfont@uv}{%
        UprightFont={Univers},%
        FontFace={l}{n}{Univers Light},%
        FontFace={m}{n}{Univers},%
        FontFace={b}{n}{Univers Bold},%
        FontFace={bx}{n}{Univers Bold},%
        FontFace={eb}{n}{Univers Black},%
        FontFace={l}{sl}{Univers LightOblique},%
        FontFace={m}{sl}{Univers Oblique},%
        FontFace={b}{sl}{Univers BoldOblique},%
        FontFace={bx}{sl}{Univers BoldOblique},%
        FontFace={eb}{sl}{Univers BlackOblique}%
      }%
    \fi%
    \newrobustcmd*\univln{\usefont{\encodingdefault}{\tud@cdfont@uv}{l}{n}}%
    \newrobustcmd*\univrn{\usefont{\encodingdefault}{\tud@cdfont@uv}{m}{n}}%
    \newrobustcmd*\univbn{\usefont{\encodingdefault}{\tud@cdfont@uv}{b}{n}}%
    \newrobustcmd*\univxn{\usefont{\encodingdefault}{\tud@cdfont@uv}{eb}{n}}%
    \newrobustcmd*\univls{\usefont{\encodingdefault}{\tud@cdfont@uv}{l}{sl}}%
    \newrobustcmd*\univrs{\usefont{\encodingdefault}{\tud@cdfont@uv}{m}{sl}}%
    \newrobustcmd*\univbs{\usefont{\encodingdefault}{\tud@cdfont@uv}{b}{sl}}%
    \newrobustcmd*\univxs{\usefont{\encodingdefault}{\tud@cdfont@uv}{eb}{sl}}%
  \else%
    \newrobustcmd*\univln{\tud@cdfont@fallback{Univers Light}{md}{up}}%
    \newrobustcmd*\univrn{\tud@cdfont@fallback{Univers}{md}{up}}%
    \newrobustcmd*\univbn{\tud@cdfont@fallback{Univers Bold}{bf}{up}}%
    \newrobustcmd*\univxn{\tud@cdfont@fallback{Univers Black}{bf}{up}}%
    \newrobustcmd*\univls{\tud@cdfont@fallback{Univers LightOblique}{md}{sl}}%
    \newrobustcmd*\univrs{\tud@cdfont@fallback{Univers Oblique}{md}{sl}}%
    \newrobustcmd*\univbs{\tud@cdfont@fallback{Univers BoldOblique}{bf}{sl}}%
    \newrobustcmd*\univxs{\tud@cdfont@fallback{Univers BlackOblique}{bf}{sl}}%
  \fi%
  \if@tud@cdfont@db%
    \if@tud@x@fontspec@enabled%
      \tud@x@fontspec@init{\tud@cdfont@db}{%
        UprightFont={DIN-Bold},%
        FontFace={l}{n}{DIN-Bold},%
        FontFace={m}{n}{DIN-Bold},%
        FontFace={b}{n}{DIN-Bold},%
        FontFace={bx}{n}{DIN-Bold},%
        FontFace={eb}{n}{DIN-Bold},%
        FontFace={l}{sl}{Font=DIN-Bold,FakeSlant=0.15},%
        FontFace={m}{sl}{Font=DIN-Bold,FakeSlant=0.15},%
        FontFace={b}{sl}{Font=DIN-Bold,FakeSlant=0.15},%
        FontFace={bx}{sl}{Font=DIN-Bold,FakeSlant=0.15},%
        FontFace={eb}{sl}{Font=DIN-Bold,FakeSlant=0.15}%
      }%
    \fi%
    \newrobustcmd*\tud@db{\usefont{\encodingdefault}{\tud@cdfont@db}{b}{n}}%
    \if@tud@cdmath@db%
      \appto\tud@db{\mathversion{tud@dm}}%
    \fi%
    \newrobustcmd*\dinbn{\tud@db}%
  \else%
    \newrobustcmd*\tud@db{\sectfont}%
    \newrobustcmd*\dinbn{\tud@cdfont@wrn{DIN-Bold}\tud@db}%
  \fi%
  \newcommand*\textuln{}%
  \newcommand*\texturn{}%
  \newcommand*\textubn{}%
  \newcommand*\textuxn{}%
  \newcommand*\textuls{}%
  \newcommand*\texturs{}%
  \newcommand*\textubs{}%
  \newcommand*\textuxs{}%
  \newcommand*\textdbn{}%
  \DeclareTextFontCommand\textuln{\univln}%
  \DeclareTextFontCommand\texturn{\univrn}%
  \DeclareTextFontCommand\textubn{\univbn}%
  \DeclareTextFontCommand\textuxn{\univxn}%
  \DeclareTextFontCommand\textuls{\univls}%
  \DeclareTextFontCommand\texturs{\univrs}%
  \DeclareTextFontCommand\textubs{\univbs}%
  \DeclareTextFontCommand\textuxs{\univxs}%
  \DeclareTextFontCommand\textdbn{\dinbn}%
  \if@tud@x@fontspec@enabled%
    \tud@x@fontspec@init{\tud@cdfont@uv t}{%
      UprightFont={LMMono10-Regular},%
      FontFace={l}{n}{LMMonoLt10-Regular},%
      FontFace={m}{n}{LMMono10-Regular},%
      FontFace={sb}{n}{LMMono10-Regular},%
      FontFace={b}{n}{LMMonoLt10-Bold},%
      FontFace={bx}{n}{LMMonoLt10-Bold},%
      FontFace={eb}{n}{LMMonoLt10-Bold},%
      FontFace={l}{sl}{LMMonoLt10-Oblique},%
      FontFace={m}{sl}{LMMonoSlant10-Regular},%
      FontFace={sb}{sl}{LMMonoSlant10-Regular},%
      FontFace={b}{sl}{LMMonoLt10-BoldOblique},%
      FontFace={bx}{sl}{LMMonoLt10-BoldOblique},%
      FontFace={eb}{sl}{LMMonoLt10-BoldOblique}%
    }%
  \fi%
  \undef\tud@cdfont@init%
}
\newcommand*\mv@tud@dm{}
\renewcommand*\tud@cdmath@init{%
  \if@tud@cdmath@uv%
    \tud@cdmath@declare{\tud@cdfont@uv}{\tud@cdfont@uv t}%
    \SetSymbolFont{largesymbols}{tud@nm}{OMX}{iwona}{m}{n}%
    \SetSymbolFont{largesymbols}{tud@bm}{OMX}{iwona}{b}{n}%
    \SetMathAlphabet{\mathcal}{tud@nm}{OMS}{lmsy}{m}{n}%
    \SetMathAlphabet{\mathcal}{tud@bm}{OMS}{lmsy}{b}{n}%
    \@ifpackageloaded{amsfonts}{%
      \DeclareFontFamily{U}{\tud@cdfont@uv a}{}%
      \DeclareFontShape{U}{\tud@cdfont@uv a}{m}{n}{<->cmbras10}{}%
      \SetSymbolFont{AMSa}{tud@nm}{U}{\tud@cdfont@uv a}{m}{n}%
      \SetSymbolFont{AMSa}{tud@bm}{U}{\tud@cdfont@uv a}{m}{n}%
      \DeclareFontFamily{U}{\tud@cdfont@uv b}{}%
      \DeclareFontShape{U}{\tud@cdfont@uv b}{m}{n}{<->cmbrbs10}{}%
      \SetSymbolFont{AMSb}{tud@nm}{U}{\tud@cdfont@uv b}{m}{n}%
      \SetSymbolFont{AMSb}{tud@bm}{U}{\tud@cdfont@uv b}{m}{n}%
    }{}%
  \fi%
  \if@tud@cdmath@db%
    \DeclareMathVersion{tud@dm}%
    \SetSymbolFont{operators}{tud@dm}{OT1}{\tud@cdfont@db}{b}{n}%
    \SetSymbolFont{letters}{tud@dm}{OML}{\tud@cdfont@db}{b}{sl}%
    \SetSymbolFont{symbols}{tud@dm}{OMS}{\tud@cdfont@db}{b}{n}%
    \SetSymbolFont{largesymbols}{tud@dm}{OMX}{iwona}{ebc}{n}%
    \SetMathAlphabet{\mathrm}{tud@dm}{OT1}{\tud@cdfont@db}{b}{n}%
    \SetMathAlphabet{\mathnormal}{tud@dm}{OML}{\tud@cdfont@db}{b}{sl}%
    \SetMathAlphabet{\mathbf}{tud@dm}{OT1}{\tud@cdfont@db}{b}{n}%
    \SetMathAlphabet{\mathsf}{tud@dm}{OT1}{\tud@cdfont@db}{b}{n}%
    \SetMathAlphabet{\mathit}{tud@dm}{OT1}{\tud@cdfont@db}{b}{sl}%
    \if@tud@cdfont@tt%
      \SetMathAlphabet{\mathtt}{tud@dm}{OT1}{\tud@cdfont@uv t}{b}{n}%
    \fi%
    \SetMathAlphabet{\mathcal}{tud@dm}{OMS}{lmsy}{b}{n}%
  \fi%
  \AtBeginDocument{\sbox\z@{\tud@db$ $}}%
}
\renewcommand*\tud@sec@fontface[1][]{%
  \if@tud@cdfont@usedin%
    \tud@db\tud@raggedright%
  \else%
    \sectfont#1%
  \fi%
}
\renewrobustcmd*\ifdin{%
  \ifx\f@family\tud@cdfont@db%
    \expandafter\@firstoftwo%
  \else%
    \expandafter\@secondoftwo%
  \fi%
}
\renewcommand*\tud@makeuppercase[1]{%
  \protect\vphantom{\"A\"O\"U}%
  \ifdin{\begingroup\MakeTextUppercase{#1}\endgroup}{#1}%
}
\ifx\TUD@Class@Name\@undefined%
  \endinput
\fi%
\renewcommand*\tud@head@cdfont@set{%
  \if@tud@cdfont@uv%
    \ifcase\tud@head@font@num\relax\or% true
      \DeclareFixedFont{\tud@head@font@light}{\encodingdefault}%
        {\tud@cdfont@uv}{l}{n}{\tud@head@fontsize}%
    \or% heavy
      \DeclareFixedFont{\tud@head@font@light}{\encodingdefault}%
        {\tud@cdfont@uv}{m}{n}{\tud@head@fontsize}%
    \fi%
    \DeclareFixedFont{\tud@head@font@bold}{\encodingdefault}%
      {\tud@cdfont@uv}{b}{n}{\tud@head@fontsize}%
  \fi%
}
